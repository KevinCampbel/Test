<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Three.js - WebVR - Basic</title>
    <style>
    body {
        margin: 0;
    }
    #c {
        width: 100vw;
        height: 100vh;
        display: block;
    }
    </style>
  </head>
  <body>
    <canvas id="c"></canvas>
  </body>
<script type="module">
import * as THREE from './three.module.js';
import {VRButton} from './VRButton.js';

function main() {
  const canvas = document.querySelector('#c');
  const renderer = new THREE.WebGLRenderer({canvas});
  renderer.xr.enabled = true;
  document.body.appendChild(VRButton.createButton(renderer));

  // Set Up Camera
  const fov = 150;
  const aspect = 2;  // the canvas default
  const near = 0.1;
  const far = 50;
  const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
  camera.position.set(0, 1.6, 6);

  const scene = new THREE.Scene();

  {
    const color = 0xFFFFFF;
    const intensity = 1;
    const light = new THREE.DirectionalLight(color, intensity);
    light.position.set(-1, 2, 4);
    scene.add(light);
  }
    // Add Axes
    var axesHelper = new THREE.AxesHelper( 5 );
    scene.add( axesHelper )

    // Add Cube
    var geometry = new THREE.BoxGeometry( 2, 2, 2 );
    var cubeMaterials = 
    [
      new THREE.MeshBasicMaterial( { color: 0xF00000, side: THREE.DoubleSide } ), // RIGHT SIDE
      new THREE.MeshBasicMaterial( { color: 0x0F0000, side: THREE.DoubleSide } ), // LEFT SIDE
      new THREE.MeshBasicMaterial( { color: 0x00F000, side: THREE.DoubleSide } ), // TOP SIDE
      new THREE.MeshBasicMaterial( { color: 0x000F00, side: THREE.DoubleSide } ), // BOTTOM SIDE
      new THREE.MeshBasicMaterial( { color: 0x0000F0, side: THREE.DoubleSide } ), // FRONT SIDE
      new THREE.MeshBasicMaterial( { color: 0x00000F, side: THREE.DoubleSide } ), // BACK SIDE
    ]

    var material = new THREE.MeshFaceMaterial ( cubeMaterials );
    var cube = new THREE.Mesh( geometry, material );
    scene.add( cube ) ;

    // Position Cube
    cube.position.x = 0;
    cube.position.y = 1.6;
    cube.position.z = 0;

    // Add 'Room'
        // Floor
        var floorGeometry = new THREE.CubeGeometry( 10, 1, 10 );
        var floorMaterial = new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader( ).load( 'img/Floor.png' ), side: THREE.DoubleSide } );
        var floorCube = new THREE.Mesh( floorGeometry, floorMaterial );
        
        scene.add( floorCube );

        // Position Floor
        floorCube.position.x = 0;
        floorCube.position.y = -5;
        floorCube.position.z = -2;
    
        // Ceiling
        var ceilingGeometry = new THREE.CubeGeometry( 10, 1, 10 );
        var ceilingMaterial = new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader( ).load( 'img/Ceiling.png'), side: THREE.DoubleSide } );
        var ceilingCube = new THREE.Mesh( ceilingGeometry, ceilingMaterial );
        
        scene.add( ceilingCube );

        // Position Ceiling
        ceilingCube.position.x = 0;
        ceilingCube.position.y = 5;
        ceilingCube.position.z = -2;

        // Left Wall
        var leftWallGeometry = new THREE.CubeGeometry( 1, 10, 10 );
        var leftWallMaterial = new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader( ).load( 'img/LeftWall.png'), side: THREE.DoubleSide } );
        var leftWallCube = new THREE.Mesh( leftWallGeometry, leftWallMaterial );
        
        scene.add( leftWallCube );
        
        // Position Left Wall
        leftWallCube.position.x = -4;
        leftWallCube.position.y = 1.6;
        leftWallCube.position.z = 0;

        // Right Wall
        var rightWallGeometry = new THREE.CubeGeometry( 1, 10, 10 );
        var rightWallMaterial = new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader( ).load( 'img/RightWall.png'), side: THREE.DoubleSide } );
        var rightWallCube = new THREE.Mesh( rightWallGeometry, rightWallMaterial );
        
        scene.add( rightWallCube ); 

        // Position Left Wall
        rightWallCube.position.x = 4;
        rightWallCube.position.y = 1.6;
        rightWallCube.position.z = 0;

    // Correct Display Size
  function resizeRendererToDisplaySize(renderer) {
    const canvas = renderer.domElement;
    const width = canvas.clientWidth;
    const height = canvas.clientHeight;
    const needResize = canvas.width !== width || canvas.height !== height;
    if (needResize) {
      renderer.setSize(width, height, false);
    }
    return needResize;
  }

  // Create Render
  function render(time) {
    time *= 0.001;

    if (resizeRendererToDisplaySize(renderer)) {
      const canvas = renderer.domElement;
      camera.aspect = canvas.clientWidth / canvas.clientHeight;
      camera.updateProjectionMatrix();
    }
    cube.rotation.x += 0.01;
    cube.rotation.y += 0.01;

    renderer.render(scene, camera);
  }

  renderer.setAnimationLoop(render);
}

main();

main();
</script>
</html>
